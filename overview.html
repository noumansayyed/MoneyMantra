<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PennyWise AI - Complete Technical Architecture</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #fff;
            overflow-x: hidden;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            text-align: center;
            padding: 40px 20px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 20px;
            margin-bottom: 30px;
            backdrop-filter: blur(10px);
        }

        h1 {
            font-size: 3em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }

        .subtitle {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .nav-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .tab-btn {
            padding: 12px 24px;
            background: rgba(255, 255, 255, 0.2);
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 25px;
            color: white;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 16px;
            font-weight: 600;
        }

        .tab-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }

        .tab-btn.active {
            background: #fff;
            color: #667eea;
        }

        .content-section {
            display: none;
            animation: fadeIn 0.5s;
        }

        .content-section.active {
            display: block;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 20px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }

        .card h2 {
            color: #fff;
            margin-bottom: 15px;
            font-size: 1.8em;
        }

        .card h3 {
            color: #ffd700;
            margin: 20px 0 10px 0;
            font-size: 1.3em;
        }

        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .feature-card {
            background: rgba(255, 255, 255, 0.15);
            padding: 20px;
            border-radius: 10px;
            border-left: 4px solid #ffd700;
        }

        .feature-card h4 {
            color: #ffd700;
            margin-bottom: 10px;
        }

        .flow-diagram {
            background: rgba(0, 0, 0, 0.3);
            padding: 30px;
            border-radius: 15px;
            margin: 20px 0;
            overflow-x: auto;
        }

        .flow-step {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 15px 25px;
            border-radius: 10px;
            margin: 10px 0;
            display: inline-block;
            min-width: 200px;
            text-align: center;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        }

        .flow-arrow {
            text-align: center;
            font-size: 2em;
            margin: 10px 0;
            color: #ffd700;
        }

        .code-block {
            background: #1e1e1e;
            color: #d4d4d4;
            padding: 20px;
            border-radius: 10px;
            overflow-x: auto;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
            border-left: 4px solid #4ec9b0;
        }

        .tech-stack {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-top: 20px;
        }

        .tech-badge {
            background: rgba(255, 255, 255, 0.2);
            padding: 10px 20px;
            border-radius: 25px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            font-weight: 600;
        }

        .comparison-table {
            width: 100%;
            margin: 20px 0;
            border-collapse: collapse;
        }

        .comparison-table th,
        .comparison-table td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
        }

        .comparison-table th {
            background: rgba(255, 255, 255, 0.2);
            font-weight: 600;
        }

        .check {
            color: #4ade80;
            font-weight: bold;
        }

        .cross {
            color: #f87171;
            font-weight: bold;
        }

        .highlight {
            background: rgba(255, 215, 0, 0.2);
            padding: 2px 6px;
            border-radius: 4px;
            font-weight: 600;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.15);
            padding: 20px;
            border-radius: 10px;
            text-align: center;
        }

        .stat-number {
            font-size: 2.5em;
            font-weight: bold;
            color: #ffd700;
        }

        .stat-label {
            margin-top: 10px;
            opacity: 0.9;
        }

        .security-badge {
            display: inline-block;
            background: #4ade80;
            color: #000;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: bold;
            margin: 5px;
        }

        .architecture-diagram {
            background: rgba(0, 0, 0, 0.4);
            padding: 30px;
            border-radius: 15px;
            margin: 20px 0;
        }

        .layer {
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 10px;
            margin: 15px 0;
            border-left: 5px solid;
        }

        .layer.ui {
            border-color: #60a5fa;
        }

        .layer.business {
            border-color: #fbbf24;
        }

        .layer.data {
            border-color: #34d399;
        }

        .bank-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 10px;
            margin: 20px 0;
        }

        .bank-item {
            background: rgba(255, 255, 255, 0.1);
            padding: 10px;
            border-radius: 8px;
            text-align: center;
            font-size: 0.9em;
        }

        .algorithm-box {
            background: rgba(0, 0, 0, 0.3);
            padding: 20px;
            border-radius: 10px;
            margin: 15px 0;
            border: 2px dashed rgba(255, 255, 255, 0.3);
        }

        ul {
            margin-left: 20px;
            line-height: 1.8;
        }

        li {
            margin: 10px 0;
        }

        .privacy-shield {
            text-align: center;
            font-size: 4em;
            color: #4ade80;
            margin: 20px 0;
        }

        @media (max-width: 768px) {
            h1 {
                font-size: 2em;
            }

            .feature-grid,
            .stats-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>

<body>
    <div class="container">
        <header>
            <h1>üéØ PennyWise AI</h1>
            <div class="subtitle">Complete Technical Architecture & Deep Dive</div>
            <div class="subtitle" style="margin-top: 10px; font-size: 1em;">Privacy-First SMS-Powered Expense Tracker
                with On-Device AI</div>
        </header>

        <div class="nav-tabs">
            <button class="tab-btn active" onclick="showTab('overview')">Overview</button>
            <button class="tab-btn" onclick="showTab('architecture')">Architecture</button>
            <button class="tab-btn" onclick="showTab('flow')">Data Flow</button>
            <button class="tab-btn" onclick="showTab('algorithm')">Algorithms</button>
            <button class="tab-btn" onclick="showTab('features')">Features</button>
            <button class="tab-btn" onclick="showTab('security')">Security</button>
            <button class="tab-btn" onclick="showTab('comparison')">VS Others</button>
            <button class="tab-btn" onclick="showTab('technical')">Technical Details</button>
            <button class="tab-btn" onclick="showTab('banks')">Bank Support</button>
        </div>

        <!-- OVERVIEW SECTION -->
        <div id="overview" class="content-section active">
            <div class="card">
                <h2>üì± Project Overview</h2>
                <p style="font-size: 1.2em; line-height: 1.8;">
                    PennyWise AI is an <span class="highlight">open-source</span>, <span
                        class="highlight">privacy-first</span> Android expense tracker that automatically transforms
                    bank transaction SMS into organized financial insights using <span class="highlight">100% on-device
                        AI processing</span>.
                </p>

                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-number">190+</div>
                        <div class="stat-label">GitHub Stars</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">47+</div>
                        <div class="stat-label">Supported Banks</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">10</div>
                        <div class="stat-label">Countries</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">100%</div>
                        <div class="stat-label">Privacy</div>
                    </div>
                </div>

                <h3>üéØ Core Objectives</h3>
                <ul>
                    <li><strong>Eliminate Manual Entry:</strong> Automatic expense tracking from SMS</li>
                    <li><strong>Preserve Privacy:</strong> 100% on-device processing, no cloud</li>
                    <li><strong>Multi-Currency Support:</strong> Handle multiple countries & currencies</li>
                    <li><strong>AI-Powered Insights:</strong> Natural language queries without data leaks</li>
                    <li><strong>Open Source:</strong> Transparent, auditable, community-driven</li>
                </ul>

                <h3>üöÄ What Makes It Different</h3>
                <div class="feature-grid">
                    <div class="feature-card">
                        <h4>üîí True Privacy</h4>
                        <p>No servers, no cloud, no tracking. Your financial data physically never leaves your phone.
                        </p>
                    </div>
                    <div class="feature-card">
                        <h4>ü§ñ On-Device AI</h4>
                        <p>MediaPipe LLM runs locally. Ask questions about your spending without sending data anywhere.
                        </p>
                    </div>
                    <div class="feature-card">
                        <h4>‚ö° Zero Setup</h4>
                        <p>No accounts, no sign-ups, no verification. Install and start tracking immediately.</p>
                    </div>
                    <div class="feature-card">
                        <h4>üåç Global Support</h4>
                        <p>47+ banks across 10 countries with native currency support.</p>
                    </div>
                    <div class="feature-card">
                        <h4>üìä Smart Analytics</h4>
                        <p>Automatic categorization, subscription detection, and spending insights.</p>
                    </div>
                    <div class="feature-card">
                        <h4>üÜì 100% Free</h4>
                        <p>Open source MIT license. No ads, no subscriptions, no hidden costs.</p>
                    </div>
                </div>
            </div>

            <div class="card">
                <h2>üõ†Ô∏è Technology Stack</h2>
                <div class="tech-stack">
                    <div class="tech-badge">Kotlin 2.0.21</div>
                    <div class="tech-badge">Jetpack Compose</div>
                    <div class="tech-badge">Room Database</div>
                    <div class="tech-badge">Coroutines & Flow</div>
                    <div class="tech-badge">Hilt DI</div>
                    <div class="tech-badge">MediaPipe LLM</div>
                    <div class="tech-badge">Material Design 3</div>
                    <div class="tech-badge">MVVM Architecture</div>
                    <div class="tech-badge">Android 12+</div>
                </div>
            </div>
        </div>

        <!-- ARCHITECTURE SECTION -->
        <div id="architecture" class="content-section">
            <div class="card">
                <h2>üèóÔ∏è System Architecture</h2>

                <div class="architecture-diagram">
                    <h3 style="color: #ffd700; text-align: center; margin-bottom: 30px;">Clean Architecture - MVVM
                        Pattern</h3>

                    <div class="layer ui">
                        <h4>üì± PRESENTATION LAYER (UI)</h4>
                        <ul>
                            <li><strong>Jetpack Compose:</strong> Declarative UI framework</li>
                            <li><strong>ViewModels:</strong> Manage UI state and business logic</li>
                            <li><strong>UI States:</strong> Loading, Success, Error handling</li>
                            <li><strong>Navigation:</strong> Screen flow management</li>
                            <li><strong>Theme:</strong> Material Design 3 with dynamic colors</li>
                        </ul>
                        <div class="code-block">// Example ViewModel
                            @HiltViewModel
                            class TransactionViewModel @Inject constructor(
                            private val repository: TransactionRepository
                            ) : ViewModel() {
                            val transactions = repository.getAllTransactions()
                            .stateIn(viewModelScope, SharingStarted.Lazily, emptyList())
                            }</div>
                    </div>

                    <div class="flow-arrow">‚¨áÔ∏è</div>

                    <div class="layer business">
                        <h4>‚öôÔ∏è DOMAIN LAYER (Business Logic)</h4>
                        <ul>
                            <li><strong>Use Cases:</strong> Single responsibility operations</li>
                            <li><strong>Business Rules:</strong> Categorization logic</li>
                            <li><strong>Entities:</strong> Core data models</li>
                            <li><strong>Repositories (Interface):</strong> Data contract</li>
                        </ul>
                        <div class="code-block">// Use Case Example
                            class ParseTransactionUseCase @Inject constructor(
                            private val smsParser: SmsParser
                            ) {
                            suspend operator fun invoke(sms: String): Transaction? {
                            return smsParser.parse(sms)
                            }
                            }</div>
                    </div>

                    <div class="flow-arrow">‚¨áÔ∏è</div>

                    <div class="layer data">
                        <h4>üíæ DATA LAYER</h4>
                        <ul>
                            <li><strong>Room Database:</strong> Local SQLite storage</li>
                            <li><strong>Repository Implementation:</strong> Data source coordination</li>
                            <li><strong>SMS Parser:</strong> Regex-based extraction</li>
                            <li><strong>MediaPipe Service:</strong> AI inference</li>
                            <li><strong>Data Sources:</strong> SMS ContentProvider, Local DB</li>
                        </ul>
                        <div class="code-block">// Repository Implementation
                            class TransactionRepositoryImpl @Inject constructor(
                            private val dao: TransactionDao,
                            private val smsParser: SmsParser
                            ) : TransactionRepository {
                            override fun getAllTransactions() = dao.getAllTransactions()
                            override suspend fun insertTransaction(tx: Transaction) =
                            dao.insertTransaction(tx)
                            }</div>
                    </div>
                </div>

                <h3>üîß Dependency Injection with Hilt</h3>
                <div class="code-block">@Module
                    @InstallIn(SingletonComponent::class)
                    object AppModule {
                    @Provides
                    @Singleton
                    fun provideDatabase(@ApplicationContext context: Context) =
                    Room.databaseBuilder(
                    context,
                    AppDatabase::class.java,
                    "pennywise_db"
                    ).build()

                    @Provides
                    fun provideTransactionDao(db: AppDatabase) = db.transactionDao()
                    }</div>
            </div>
        </div>

        <!-- FLOW SECTION -->
        <div id="flow" class="content-section">
            <div class="card">
                <h2>üîÑ Complete Data Flow</h2>

                <div class="flow-diagram">
                    <h3 style="color: #ffd700; text-align: center; margin-bottom: 20px;">From SMS to Insights</h3>

                    <div class="flow-step">üì± Bank sends SMS</div>
                    <div class="flow-arrow">‚¨áÔ∏è</div>

                    <div class="flow-step">üì® Android SMS Inbox</div>
                    <div class="flow-arrow">‚¨áÔ∏è</div>

                    <div class="flow-step">üëÅÔ∏è PennyWise SMS Listener<br>(READ_SMS permission)</div>
                    <div class="flow-arrow">‚¨áÔ∏è</div>

                    <div class="flow-step">üîç Bank Identifier<br>(Sender ID matching)</div>
                    <div class="flow-arrow">‚¨áÔ∏è</div>

                    <div class="flow-step">üßÆ Regex Pattern Matcher<br>(Extract: amount, merchant, date)</div>
                    <div class="flow-arrow">‚¨áÔ∏è</div>

                    <div class="flow-step">üè∑Ô∏è Category Classifier<br>(Auto-assign category)</div>
                    <div class="flow-arrow">‚¨áÔ∏è</div>

                    <div class="flow-step">üíæ Room Database<br>(Local SQLite storage)</div>
                    <div class="flow-arrow">‚¨áÔ∏è</div>

                    <div style="display: flex; gap: 20px; justify-content: center; flex-wrap: wrap;">
                        <div class="flow-step">üìä Analytics Engine<br>(Charts & Insights)</div>
                        <div class="flow-step">üîÑ Subscription Detector<br>(Recurring payments)</div>
                        <div class="flow-step">ü§ñ AI Assistant<br>(MediaPipe LLM)</div>
                    </div>

                    <div class="flow-arrow">‚¨áÔ∏è</div>

                    <div class="flow-step">üì± Jetpack Compose UI<br>(User Interface)</div>
                </div>

                <h3>üîç Detailed Processing Steps</h3>

                <div class="algorithm-box">
                    <h4>Step 1: SMS Detection</h4>
                    <div class="code-block">// SMS Broadcast Receiver
                        class SmsReceiver : BroadcastReceiver() {
                        override fun onReceive(context: Context, intent: Intent) {
                        val bundle = intent.extras ?: return
                        val pdus = bundle["pdus"] as Array<*>? ?: return

                            pdus.forEach { pdu ->
                            val message = SmsMessage.createFromPdu(pdu as ByteArray)
                            val sender = message.originatingAddress
                            val body = message.messageBody

                            // Check if it's a bank SMS
                            if (isBankSms(sender)) {
                            processTransaction(sender, body)
                            }
                            }
                            }
                            }</div>
                </div>

                <div class="algorithm-box">
                    <h4>Step 2: Bank Identification</h4>
                    <div class="code-block">fun identifyBank(sender: String): BankParser? {
                        return when {
                        sender.contains("HDFCBK") -> HDFCBankParser()
                        sender.contains("SBIPSG") -> SBIParser()
                        sender.contains("ICICIB") -> ICICIParser()
                        sender.contains("AXISBK") -> AxisBankParser()
                        // ... 47+ more banks
                        else -> GenericParser()
                        }
                        }</div>
                </div>

                <div class="algorithm-box">
                    <h4>Step 3: Transaction Extraction</h4>
                    <div class="code-block">data class TransactionData(
                        val amount: Double,
                        val merchant: String,
                        val type: TransactionType, // DEBIT/CREDIT
                        val date: Long,
                        val accountNumber: String?,
                        val balance: Double?,
                        val category: String,
                        val currency: String
                        )

                        fun parseTransaction(sms: String): TransactionData? {
                        // Extract amount: Rs. 1,234.56 or INR 1234.56
                        val amountRegex = """(?:Rs\.?|INR|USD)\s*([0-9,]+\.?\d*)"""
                        val amount = amountRegex.find(sms)?.groupValues?.get(1)
                        ?.replace(",", "")?.toDoubleOrNull()

                        // Extract merchant: "at AMAZON" or "to John Doe"
                        val merchantRegex = """(?:at|to|@)\s+([\w\s]+?)(?:\s+on|\.|$)"""
                        val merchant = merchantRegex.find(sms)?.groupValues?.get(1)?.trim()

                        // Extract type: debited/credited
                        val type = when {
                        sms.contains("debited", ignoreCase = true) -> DEBIT
                        sms.contains("credited", ignoreCase = true) -> CREDIT
                        else -> DEBIT
                        }

                        return TransactionData(amount, merchant, type, ...)
                        }</div>
                </div>
            </div>
        </div>

        <!-- ALGORITHM SECTION -->
        <div id="algorithm" class="content-section">
            <div class="card">
                <h2>üßÆ Core Algorithms</h2>

                <h3>1Ô∏è‚É£ SMS Parsing Algorithm</h3>
                <div class="algorithm-box">
                    <strong>Input:</strong> Raw SMS text from bank<br>
                    <strong>Output:</strong> Structured Transaction object<br><br>

                    <strong>Algorithm Steps:</strong>
                    <ol style="margin-left: 20px;">
                        <li><strong>Sender Validation:</strong> Check if SMS is from known bank</li>
                        <li><strong>Pattern Matching:</strong> Apply bank-specific regex patterns</li>
                        <li><strong>Amount Extraction:</strong>
                            <ul>
                                <li>Match currency symbols (‚Çπ, $, ÿØ.ÿ•, etc.)</li>
                                <li>Handle number formats (1,234.56 or 1234.56)</li>
                                <li>Convert to double precision</li>
                            </ul>
                        </li>
                        <li><strong>Merchant Extraction:</strong>
                            <ul>
                                <li>Look for keywords: "at", "to", "@", "from"</li>
                                <li>Extract business name</li>
                                <li>Clean & normalize merchant name</li>
                            </ul>
                        </li>
                        <li><strong>Transaction Type:</strong> Detect debit/credit/ATM</li>
                        <li><strong>Date Parsing:</strong> Extract timestamp from SMS</li>
                        <li><strong>Balance Extraction:</strong> Find "Avl bal" or "Balance"</li>
                        <li><strong>Validation:</strong> Ensure all required fields present</li>
                    </ol>

                    <div class="code-block">// Pseudo-code
                        function parseSMS(sms: String, bank: Bank): Transaction? {
                        pattern = bank.getRegexPattern()

                        // Extract components using regex
                        amount = extractAmount(sms, pattern.amountPattern)
                        merchant = extractMerchant(sms, pattern.merchantPattern)
                        type = extractType(sms, pattern.typePattern)
                        date = extractDate(sms, pattern.datePattern)
                        balance = extractBalance(sms, pattern.balancePattern)

                        // Validate
                        if (amount == null || merchant == null) {
                        return null
                        }

                        // Create transaction
                        return Transaction(
                        amount = amount,
                        merchant = normalizeMerchant(merchant),
                        type = type,
                        date = date,
                        balance = balance,
                        category = categorize(merchant)
                        )
                        }</div>
                </div>

                <h3>2Ô∏è‚É£ Auto-Categorization Algorithm</h3>
                <div class="algorithm-box">
                    <strong>Goal:</strong> Automatically assign category based on merchant name<br><br>

                    <strong>Categories:</strong>
                    <ul>
                        <li>üçî Food & Dining</li>
                        <li>üöó Transportation</li>
                        <li>üõçÔ∏è Shopping</li>
                        <li>üí° Bills & Utilities</li>
                        <li>üé¨ Entertainment</li>
                        <li>üè• Healthcare</li>
                        <li>üìö Education</li>
                        <li>üîÑ Subscriptions</li>
                        <li>üì¶ Others</li>
                    </ul>

                    <div class="code-block">fun categorizeTransaction(merchant: String): String {
                        val normalized = merchant.toLowerCase().trim()

                        return when {
                        // Food & Dining
                        normalized.contains("swiggy") ||
                        normalized.contains("zomato") ||
                        normalized.contains("restaurant") ||
                        normalized.contains("cafe") -> "Food & Dining"

                        // Transportation
                        normalized.contains("uber") ||
                        normalized.contains("ola") ||
                        normalized.contains("rapido") ||
                        normalized.contains("petrol") -> "Transportation"

                        // Shopping
                        normalized.contains("amazon") ||
                        normalized.contains("flipkart") ||
                        normalized.contains("myntra") ||
                        normalized.contains("mall") -> "Shopping"

                        // Subscriptions (Netflix, Spotify, etc.)
                        normalized.contains("netflix") ||
                        normalized.contains("spotify") ||
                        normalized.contains("prime") -> "Subscriptions"

                        // Bills
                        normalized.contains("electricity") ||
                        normalized.contains("water") ||
                        normalized.contains("gas") -> "Bills & Utilities"

                        else -> "Others"
                        }
                        }</div>
                </div>

                <h3>3Ô∏è‚É£ Subscription Detection Algorithm</h3>
                <div class="algorithm-box">
                    <strong>Goal:</strong> Identify recurring payments automatically<br><br>

                    <strong>Detection Logic:</strong>
                    <ol style="margin-left: 20px;">
                        <li>Group transactions by merchant name</li>
                        <li>Check for similar amounts (¬±5% variance)</li>
                        <li>Calculate time intervals between transactions</li>
                        <li>Detect patterns:
                            <ul>
                                <li>Monthly: ~30 days interval</li>
                                <li>Quarterly: ~90 days</li>
                                <li>Yearly: ~365 days</li>
                            </ul>
                        </li>
                        <li>Minimum 2 occurrences to mark as subscription</li>
                        <li>Predict next payment date</li>
                    </ol>

                    <div class="code-block">fun detectSubscriptions(transactions: List<Transaction>): List<Subscription>
                                {
                                val grouped = transactions.groupBy { it.merchant }
                                val subscriptions = mutableListOf<Subscription>()

                                    grouped.forEach { (merchant, txs) ->
                                    if (txs.size < 2) return@forEach // Sort by date val sorted=txs.sortedBy { it.date }
                                        // Calculate intervals val intervals=sorted.zipWithNext { a, b ->
                                        (b.date - a.date) / (24 * 60 * 60 * 1000) // days
                                        }

                                        // Check if intervals are consistent (monthly ~30 days)
                                        val avgInterval = intervals.average()
                                        val isRecurring = intervals.all { abs(it - avgInterval) < 5 } if (isRecurring) {
                                            subscriptions.add( Subscription( merchant=merchant,
                                            amount=sorted.last().amount, frequency=when { avgInterval in 25..35 ->
                                            "Monthly"
                                            avgInterval in 85..95 -> "Quarterly"
                                            avgInterval in 360..370 -> "Yearly"
                                            else -> "Custom"
                                            },
                                            nextPaymentDate = sorted.last().date + (avgInterval * 24 * 60 * 60 * 1000)
                                            )
                                            )
                                            }
                                            }

                                            return subscriptions
                                            }</div>
                </div>

                <h3>4Ô∏è‚É£ MediaPipe LLM Inference Algorithm</h3>
                <div class="algorithm-box">
                    <strong>Goal:</strong> Process natural language queries on-device<br><br>

                    <strong>Process:</strong>
                    <ol style="margin-left: 20px;">
                        <li><strong>Model Loading:</strong> Load Gemma 2B model (~1.5GB) into memory</li>
                        <li><strong>Context Building:</strong> Gather relevant transaction data</li>
                        <li><strong>Prompt Engineering:</strong> Create context-aware prompts</li>
                        <li><strong>Inference:</strong> Run LLM on-device using MediaPipe</li>
                        <li><strong>Response Streaming:</strong> Stream tokens back to UI</li>
                        <li><strong>Post-processing:</strong> Format and display response</li>
                    </ol>

                    <div class="code-block">class MediaPipeInferenceEngine {
                        private var llm: LlmInference? = null

                        suspend fun initialize(modelPath: String) {
                        val options = LlmInference.LlmInferenceOptions.builder()
                        .setModelPath(modelPath)
                        .setMaxTokens(512)
                        .setTopK(40)
                        .setTemperature(0.7f)
                        .setRandomSeed(42)
                        .build()

                        llm = LlmInference.createFromOptions(context, options)
                        }

                        suspend fun query(userQuestion: String, transactions: List<Transaction>): Flow<String> = flow {
                                // Build context from transactions
                                val context = buildTransactionContext(transactions)

                                // Create prompt
                                val prompt = """
                                You are a financial assistant. Based on this data:
                                $context

                                User question: $userQuestion

                                Provide a helpful, concise answer.
                                """.trimIndent()

                                // Stream response
                                llm?.generateResponseAsync(prompt) { partialResult, isDone ->
                                emit(partialResult)
                                if (isDone) return@generateResponseAsync
                                }
                                }

                                private fun buildTransactionContext(txs: List<Transaction>): String {
                                    return txs.joinToString("\n") {
                                    "- ${it.date}: ${it.merchant} - ${it.amount} (${it.category})"
                                    }
                                    }
                                    }</div>
                </div>

                <h3>5Ô∏è‚É£ Data Export Algorithm</h3>
                <div class="algorithm-box">
                    <strong>CSV Export:</strong>
                    <div class="code-block">fun exportToCSV(transactions: List<Transaction>): File {
                            val csv = StringBuilder()

                            // Header
                            csv.append("Date,Merchant,Amount,Category,Type,Balance\n")

                            // Data rows
                            transactions.forEach { tx ->
                            csv.append("${tx.date},${tx.merchant},${tx.amount},")
                            csv.append("${tx.category},${tx.type},${tx.balance ?: ""}\n")
                            }

                            // Write to file
                            val file = File(context.getExternalFilesDir(null), "transactions.csv")
                            file.writeText(csv.toString())
                            return file
                            }</div>

                    <strong>PDF Export:</strong>
                    <div class="code-block">fun exportToPDF(transactions: List<Transaction>): File {
                            val pdf = PdfDocument()
                            val pageInfo = PdfDocument.PageInfo.Builder(595, 842, 1).create()
                            val page = pdf.startPage(pageInfo)
                            val canvas = page.canvas

                            // Title
                            canvas.drawText("Transaction Report", 50f, 50f, titlePaint)

                            // Transactions
                            var yPos = 100f
                            transactions.forEach { tx ->
                            canvas.drawText("${tx.merchant}: ${tx.amount}", 50f, yPos, textPaint)
                            yPos += 20f
                            }

                            pdf.finishPage(page)

                            // Save
                            val file = File(context.getExternalFilesDir(null), "report.pdf")
                            pdf.writeTo(FileOutputStream(file))
                            pdf.close()

                            return file
                            }</div>
                </div>
            </div>
        </div>

        <!-- FEATURES SECTION -->
        <div id="features" class="content-section">
            <div class="card">
                <h2>‚ú® Complete Feature Set</h2>

                <div class="feature-grid">
                    <div class="feature-card">
                        <h4>üì® Automatic SMS Parsing</h4>
                        <ul style="margin-left: 15px; margin-top: 10px;">
                            <li>Real-time transaction detection</li>
                            <li>Background SMS monitoring</li>
                            <li>47+ bank support</li>
                            <li>Multi-currency handling</li>
                            <li>Regex-based extraction</li>
                            <li>99% accuracy rate</li>
                        </ul>
                    </div>

                    <div class="feature-card">
                        <h4>üè∑Ô∏è Smart Categorization</h4>
                        <ul style="margin-left: 15px; margin-top: 10px;">
                            <li>9 default categories</li>
                            <li>Auto merchant detection</li>
                            <li>Custom categories</li>
                            <li>Merchant name cleaning</li>
                            <li>Pattern learning</li>
                        </ul>
                    </div>

                    <div class="feature-card">
                        <h4>üìä Analytics Dashboard</h4>
                        <ul style="margin-left: 15px; margin-top: 10px;">
                            <li>Monthly spending charts</li>
                            <li>Category breakdown</li>
                            <li>Trend analysis</li>
                            <li>Spending patterns</li>
                            <li>Income vs Expenses</li>
                            <li>Visual pie & bar charts</li>
                        </ul>
                    </div>

                    <div class="feature-card">
                        <h4>üîÑ Subscription Tracking</h4>
                        <ul style="margin-left: 15px; margin-top: 10px;">
                            <li>Auto-detect recurring payments</li>
                            <li>Payment reminders</li>
                            <li>Frequency analysis</li>
                            <li>Cost projection</li>
                            <li>Cancel suggestions</li>
                        </ul>
                    </div>

                    <div class="feature-card">
                        <h4>ü§ñ AI Assistant</h4>
                        <ul style="margin-left: 15px; margin-top: 10px;">
                            <li>Natural language queries</li>
                            <li>100% on-device processing</li>
                            <li>Gemma 2B / Qwen 2.5</li>
                            <li>Financial insights</li>
                            <li>Budget recommendations</li>
                            <li>Spending analysis</li>
                        </ul>
                    </div>

                    <div class="feature-card">
                        <h4>üîç Search & Filter</h4>
                        <ul style="margin-left: 15px; margin-top: 10px;">
                            <li>Search by merchant</li>
                            <li>Amount range filter</li>
                            <li>Date range selection</li>
                            <li>Category filtering</li>
                            <li>Type filtering (Debit/Credit)</li>
                            <li>Quick filters</li>
                        </ul>
                    </div>

                    <div class="feature-card">
                        <h4>üì§ Data Export</h4>
                        <ul style="margin-left: 15px; margin-top: 10px;">
                            <li>CSV export</li>
                            <li>PDF reports</li>
                            <li>Custom date ranges</li>
                            <li>Category-wise reports</li>
                            <li>Email sharing</li>
                        </ul>
                    </div>

                    <div class="feature-card">
                        <h4>üé® UI/UX Features</h4>
                        <ul style="margin-left: 15px; margin-top: 10px;">
                            <li>Material Design 3</li>
                            <li>Dynamic theming</li>
                            <li>Dark mode</li>
                            <li>Smooth animations</li>
                            <li>Responsive layouts</li>
                            <li>Gesture support</li>
                        </ul>
                    </div>

                    <div class="feature-card">
                        <h4>üîê Privacy Features</h4>
                        <ul style="margin-left: 15px; margin-top: 10px;">
                            <li>Biometric app lock</li>
                            <li>No cloud sync</li>
                            <li>Local-only storage</li>
                            <li>No analytics</li>
                            <li>No tracking</li>
                            <li>Open source</li>
                        </ul>
                    </div>

                    <div class="feature-card">
                        <h4>üåê Multi-Language</h4>
                        <ul style="margin-left: 15px; margin-top: 10px;">
                            <li>English SMS support</li>
                            <li>Hindi (Devanagari)</li>
                            <li>Arabic (RTL support)</li>
                            <li>Russian/Belarusian</li>
                            <li>Spanish</li>
                            <li>More coming soon</li>
                        </ul>
                    </div>

                    <div class="feature-card">
                        <h4>üí∞ Multi-Currency</h4>
                        <ul style="margin-left: 15px; margin-top: 10px;">
                            <li>Indian Rupee (‚Çπ)</li>
                            <li>US Dollar ($)</li>
                            <li>UAE Dirham (ÿØ.ÿ•)</li>
                            <li>Nepali Rupee (‚Ç®)</li>
                            <li>Ethiopian Birr (·â•·à≠)</li>
                            <li>Auto-detection</li>
                        </ul>
                    </div>

                    <div class="feature-card">
                        <h4>‚öôÔ∏è Advanced Settings</h4>
                        <ul style="margin-left: 15px; margin-top: 10px;">
                            <li>Custom categories</li>
                            <li>Notification preferences</li>
                            <li>Data backup</li>
                            <li>Theme customization</li>
                            <li>SMS filtering rules</li>
                            <li>Privacy controls</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="card">
                <h2>üéØ Key Functionality Breakdown</h2>

                <h3>Transaction Management</h3>
                <ul>
                    <li><strong>View All Transactions:</strong> Chronological list with infinite scroll</li>
                    <li><strong>Transaction Details:</strong> Full SMS body, bank info, balance</li>
                    <li><strong>Edit Transactions:</strong> Modify category, merchant, notes</li>
                    <li><strong>Delete Transactions:</strong> Remove unwanted entries</li>
                    <li><strong>Merge Duplicates:</strong> Automatic duplicate detection</li>
                </ul>

                <h3>Analytics & Insights</h3>
                <ul>
                    <li><strong>Monthly Overview:</strong> Total spent, income, net savings</li>
                    <li><strong>Category Analysis:</strong> Top spending categories</li>
                    <li><strong>Merchant Analysis:</strong> Most frequent merchants</li>
                    <li><strong>Time-based Trends:</strong> Spending over time</li>
                    <li><strong>Comparison:</strong> Month-over-month, Year-over-year</li>
                </ul>

                <h3>Subscription Management</h3>
                <ul>
                    <li><strong>Active Subscriptions:</strong> List all recurring payments</li>
                    <li><strong>Cost Analysis:</strong> Monthly/yearly subscription cost</li>
                    <li><strong>Payment Reminders:</strong> Notifications before due date</li>
                    <li><strong>Cancellation Tracking:</strong> Mark subscriptions as cancelled</li>
                </ul>
            </div>
        </div>

        <!-- SECURITY SECTION -->
        <div id="security" class="content-section">
            <div class="card">
                <h2>üîí Security & Privacy Architecture</h2>

                <div class="privacy-shield">üõ°Ô∏è</div>
                <h3 style="text-align: center; color: #4ade80; font-size: 1.5em; margin-bottom: 30px;">
                    ZERO-KNOWLEDGE ARCHITECTURE
                </h3>

                <div class="feature-grid">
                    <div class="security-badge">No Cloud Servers</div>
                    <div class="security-badge">No User Accounts</div>
                    <div class="security-badge">No Analytics</div>
                    <div class="security-badge">No Tracking</div>
                    <div class="security-badge">No Ads</div>
                    <div class="security-badge">Open Source</div>
                </div>

                <h3>üîê Privacy Principles</h3>
                <div class="algorithm-box">
                    <strong>1. On-Device Processing</strong>
                    <ul>
                        <li>ALL SMS parsing happens locally</li>
                        <li>ALL AI inference runs on-device</li>
                        <li>ALL analytics computed locally</li>
                        <li>NO data ever leaves your phone</li>
                    </ul>

                    <strong>2. Local Storage Only</strong>
                    <ul>
                        <li>Room Database (SQLite) on device</li>
                        <li>Encrypted Android storage</li>
                        <li>No cloud backup/sync</li>
                        <li>User controls all data</li>
                    </ul>

                    <strong>3. Minimal Permissions</strong>
                    <div class="code-block"><!-- Only 3 permissions -->
                        <uses-permission android:name="android.permission.READ_SMS" />
                        <!-- Read-only access to SMS -->

                        <uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" />
                        <!-- Start service after device boot -->

                        <uses-permission android:name="android.permission.INTERNET" />
                        <!-- ONLY for optional AI model download -->
                        <!-- Can be disabled after download -->
                    </div>

                    <strong>4. No Network Calls</strong>
                    <ul>
                        <li>No API endpoints</li>
                        <li>No telemetry</li>
                        <li>No crash reporting to servers</li>
                        <li>Internet only for model download</li>
                    </ul>

                    <strong>5. Transparent & Auditable</strong>
                    <ul>
                        <li>100% open source (MIT License)</li>
                        <li>Code publicly available on GitHub</li>
                        <li>Community reviewed</li>
                        <li>F-Droid builds independently</li>
                    </ul>
                </div>

                <h3>üîí Security Features</h3>
                <ul>
                    <li><strong>Biometric App Lock:</strong> Fingerprint/Face unlock</li>
                    <li><strong>Auto-lock:</strong> Lock after inactivity</li>
                    <li><strong>Android Security Model:</strong> Sandbox app isolation</li>
                    <li><strong>No Root Required:</strong> Works on standard Android</li>
                    <li><strong>Data Encryption:</strong> Android storage encryption</li>
                </ul>

                <h3>üõ°Ô∏è What PennyWise CANNOT Do</h3>
                <div class="algorithm-box" style="border-color: #4ade80;">
                    <ul>
                        <li>‚ùå Cannot send SMS messages</li>
                        <li>‚ùå Cannot modify or delete SMS</li>
                        <li>‚ùå Cannot access contacts</li>
                        <li>‚ùå Cannot access call logs</li>
                        <li>‚ùå Cannot access camera/microphone</li>
                        <li>‚ùå Cannot access location</li>
                        <li>‚ùå Cannot upload data to internet</li>
                        <li>‚ùå Cannot share data with third parties</li>
                    </ul>
                </div>

                <h3>üîç Privacy Comparison</h3>
                <table class="comparison-table">
                    <thead>
                        <tr>
                            <th>Privacy Aspect</th>
                            <th>PennyWise AI</th>
                            <th>Cloud Apps</th>
                            <th>Banking Apps</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Data Storage</td>
                            <td class="check">‚úì Local Only</td>
                            <td class="cross">‚úó Cloud Servers</td>
                            <td class="cross">‚úó Bank Servers</td>
                        </tr>
                        <tr>
                            <td>AI Processing</td>
                            <td class="check">‚úì On-Device</td>
                            <td class="cross">‚úó Cloud APIs</td>
                            <td class="cross">‚úó N/A</td>
                        </tr>
                        <tr>
                            <td>User Accounts</td>
                            <td class="check">‚úì None Required</td>
                            <td class="cross">‚úó Mandatory</td>
                            <td class="cross">‚úó Mandatory</td>
                        </tr>
                        <tr>
                            <td>Data Sharing</td>
                            <td class="check">‚úì Zero</td>
                            <td class="cross">‚úó Partners/Ads</td>
                            <td class="cross">‚úó Analytics</td>
                        </tr>
                        <tr>
                            <td>Open Source</td>
                            <td class="check">‚úì Yes</td>
                            <td class="cross">‚úó No</td>
                            <td class="cross">‚úó No</td>
                        </tr>
                        <tr>
                            <td>Tracking</td>
                            <td class="check">‚úì None</td>
                            <td class="cross">‚úó Extensive</td>
                            <td class="cross">‚úó Analytics</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- COMPARISON SECTION -->
        <div id="comparison" class="content-section">
            <div class="card">
                <h2>‚öñÔ∏è PennyWise vs Traditional Expense Trackers</h2>

                <h3>üéØ What Makes PennyWise Different</h3>

                <table class="comparison-table">
                    <thead>
                        <tr>
                            <th>Feature</th>
                            <th>PennyWise AI</th>
                            <th>Walnut/ET Money</th>
                            <th>YNAB/Mint</th>
                            <th>Manual Apps</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>Data Entry</strong></td>
                            <td class="check">‚úì Automatic (SMS)</td>
                            <td class="check">‚úì Automatic (SMS)</td>
                            <td class="cross">‚úó Bank Linking</td>
                            <td class="cross">‚úó Manual</td>
                        </tr>
                        <tr>
                            <td><strong>Privacy</strong></td>
                            <td class="check">‚úì 100% Local</td>
                            <td class="cross">‚úó Cloud Storage</td>
                            <td class="cross">‚úó Cloud + Bank API</td>
                            <td class="check">‚úì Usually Local</td>
                        </tr>
                        <tr>
                            <td><strong>AI Assistant</strong></td>
                            <td class="check">‚úì On-Device</td>
                            <td class="cross">‚úó None/Cloud</td>
                            <td class="cross">‚úó None</td>
                            <td class="cross">‚úó None</td>
                        </tr>
                        <tr>
                            <td><strong>Cost</strong></td>
                            <td class="check">‚úì Free Forever</td>
                            <td class="cross">‚úó Freemium</td>
                            <td class="cross">‚úó $99/year</td>
                            <td class="check">‚úì Varies</td>
                        </tr>
                        <tr>
                            <td><strong>Ads</strong></td>
                            <td class="check">‚úì None</td>
                            <td class="cross">‚úó Yes</td>
                            <td class="check">‚úì None (Paid)</td>
                            <td class="cross">‚úó Often</td>
                        </tr>
                        <tr>
                            <td><strong>Open Source</strong></td>
                            <td class="check">‚úì MIT License</td>
                            <td class="cross">‚úó Proprietary</td>
                            <td class="cross">‚úó Proprietary</td>
                            <td class="cross">‚úó Rarely</td>
                        </tr>
                        <tr>
                            <td><strong>Bank Support</strong></td>
                            <td class="check">‚úì 47+ Banks</td>
                            <td class="check">‚úì Most Indian</td>
                            <td class="check">‚úì US/EU Banks</td>
                            <td class="cross">‚úó N/A</td>
                        </tr>
                        <tr>
                            <td><strong>Multi-Currency</strong></td>
                            <td class="check">‚úì 8+ Currencies</td>
                            <td class="cross">‚úó INR Only</td>
                            <td class="check">‚úì Yes</td>
                            <td class="check">‚úì Usually</td>
                        </tr>
                        <tr>
                            <td><strong>Offline Mode</strong></td>
                            <td class="check">‚úì 100% Offline</td>
                            <td class="cross">‚úó Requires Internet</td>
                            <td class="cross">‚úó Requires Internet</td>
                            <td class="check">‚úì Usually</td>
                        </tr>
                        <tr>
                            <td><strong>Setup Time</strong></td>
                            <td class="check">‚úì &lt;2 minutes</td>
                            <td class="cross">‚úó 5-10 minutes</td>
                            <td class="cross">‚úó 15+ minutes</td>
                            <td class="check">‚úì Quick</td>
                        </tr>
                    </tbody>
                </table>

                <h3>üîë Key Differentiators</h3>
                <div class="feature-grid">
                    <div class="feature-card">
                        <h4>1. TRUE Privacy</h4>
                        <p>Unlike Walnut/ET Money that upload SMS to cloud servers, PennyWise processes everything
                            locally. Your financial data physically never leaves your phone.</p>
                    </div>

                    <div class="feature-card">
                        <h4>2. On-Device AI</h4>
                        <p>While others use cloud AI APIs (OpenAI, Google), PennyWise runs Gemma 2B locally using
                            MediaPipe. Zero data leaks.</p>
                    </div>

                    <div class="feature-card">
                        <h4>3. No Bank Linking</h4>
                        <p>Apps like YNAB/Mint require bank credentials. PennyWise only reads SMS - no sensitive
                            credentials needed.</p>
                    </div>

                    <div class="feature-card">
                        <h4>4. Open Source</h4>
                        <p>Code is transparent and auditable. Community can verify no backdoors or tracking. Trust
                            through transparency.</p>
                    </div>

                    <div class="feature-card">
                        <h4>5. No Lock-In</h4>
                        <p>Export your data anytime as CSV/PDF. Switch apps without losing history. Your data, your
                            control.</p>
                    </div>

                    <div class="feature-card">
                        <h4>6. Lightweight</h4>
                        <p>~50MB app size (without AI model). Minimal battery usage. Works on low-end devices (Android
                            12+).</p>
                    </div>
                </div>

                <h3>üìä Use Case Comparison</h3>
                <div class="algorithm-box">
                    <strong>Choose PennyWise If:</strong>
                    <ul>
                        <li>üîí Privacy is your top priority</li>
                        <li>üö´ You don't want cloud storage</li>
                        <li>üí∞ You want free, no-subscription tracking</li>
                        <li>ü§ñ You want AI without data sharing</li>
                        <li>üåç You're in India, UAE, Nepal, Ethiopia, etc.</li>
                        <li>üì± You prefer open-source software</li>
                    </ul>

                    <strong>Choose Others If:</strong>
                    <ul>
                        <li>‚òÅÔ∏è You want cloud sync across devices</li>
                        <li>üè¶ You need direct bank account linking</li>
                        <li>üí≥ You want credit card integration</li>
                        <li>üë• You need family/team sharing</li>
                        <li>üí∞ You need investment tracking</li>
                        <li>üßæ You need tax preparation features</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- TECHNICAL DETAILS SECTION -->
        <div id="technical" class="content-section">
            <div class="card">
                <h2>‚öôÔ∏è Technical Implementation Details</h2>

                <h3>üì¶ Project Structure</h3>
                <div class="code-block">pennywiseai-tracker/
                    ‚îú‚îÄ‚îÄ app/ # Main Android app
                    ‚îÇ ‚îú‚îÄ‚îÄ src/main/
                    ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ java/com/pennywiseai/
                    ‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ ui/ # Jetpack Compose UI
                    ‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ screens/ # Screen composables
                    ‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ components/ # Reusable components
                    ‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ theme/ # Material 3 theme
                    ‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ navigation/ # Navigation graph
                    ‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ data/ # Data layer
                    ‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ local/ # Room database
                    ‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ repository/ # Repository pattern
                    ‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ model/ # Data models
                    ‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ domain/ # Business logic
                    ‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ usecase/ # Use cases
                    ‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ model/ # Domain models
                    ‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ di/ # Dependency injection
                    ‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ AppModule.kt # Hilt modules
                    ‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ service/ # Background services
                    ‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ SmsService.kt # SMS listener
                    ‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ LlmService.kt # AI inference
                    ‚îÇ ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ util/ # Utilities
                    ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ res/ # Resources
                    ‚îÇ ‚îî‚îÄ‚îÄ build.gradle.kts # App build config
                    ‚îú‚îÄ‚îÄ parser-core/ # SMS parsing library
                    ‚îÇ ‚îî‚îÄ‚îÄ src/main/java/
                    ‚îÇ ‚îî‚îÄ‚îÄ parsers/ # Bank-specific parsers
                    ‚îÇ ‚îú‚îÄ‚îÄ HDFCParser.kt
                    ‚îÇ ‚îú‚îÄ‚îÄ SBIParser.kt
                    ‚îÇ ‚îî‚îÄ‚îÄ ...
                    ‚îú‚îÄ‚îÄ docs/ # Documentation
                    ‚îú‚îÄ‚îÄ screenshots/ # App screenshots
                    ‚îî‚îÄ‚îÄ build.gradle.kts # Root build config</div>

                <h3>üóÑÔ∏è Database Schema</h3>
                <div class="code-block">@Database(entities = [Transaction::class, Subscription::class], version = 1)
                    abstract class AppDatabase : RoomDatabase() {
                    abstract fun transactionDao(): TransactionDao
                    abstract fun subscriptionDao(): SubscriptionDao
                    }

                    @Entity(tableName = "transactions")
                    data class Transaction(
                    @PrimaryKey(autoGenerate = true) val id: Long = 0,
                    val amount: Double,
                    val merchant: String,
                    val category: String,
                    val type: TransactionType, // DEBIT, CREDIT, ATM
                    @ColumnInfo(name = "date") val timestamp: Long,
                    val accountNumber: String?,
                    val balance: Double?,
                    val smsBody: String,
                    val bank: String,
                    val currency: String = "INR",
                    val notes: String? = null,
                    @ColumnInfo(name = "created_at") val createdAt: Long = System.currentTimeMillis()
                    )

                    @Entity(tableName = "subscriptions")
                    data class Subscription(
                    @PrimaryKey(autoGenerate = true) val id: Long = 0,
                    val merchant: String,
                    val amount: Double,
                    val frequency: String, // MONTHLY, QUARTERLY, YEARLY
                    val nextPaymentDate: Long,
                    val isActive: Boolean = true
                    )</div>

                <h3>üé® UI Architecture - Jetpack Compose</h3>
                <div class="code-block">// Example Screen Composable
                    @Composable
                    fun TransactionListScreen(
                    viewModel: TransactionViewModel = hiltViewModel()
                    ) {
                    val transactions by viewModel.transactions.collectAsState(initial = emptyList())
                    val uiState by viewModel.uiState.collectAsState()

                    Scaffold(
                    topBar = { TransactionTopBar() },
                    floatingActionButton = { AddTransactionFAB() }
                    ) { padding ->
                    when (uiState) {
                    is UiState.Loading -> LoadingIndicator()
                    is UiState.Success -> TransactionList(transactions)
                    is UiState.Error -> ErrorMessage(uiState.message)
                    }
                    }
                    }

                    // Composable with Material 3
                    @Composable
                    fun TransactionCard(transaction: Transaction) {
                    Card(
                    modifier = Modifier.fillMaxWidth().padding(8.dp),
                    colors = CardDefaults.cardColors(
                    containerColor = MaterialTheme.colorScheme.surfaceVariant
                    )
                    ) {
                    Row(modifier = Modifier.padding(16.dp)) {
                    // Merchant icon
                    Icon(Icons.Default.Store, contentDescription = null)

                    Spacer(modifier = Modifier.width(16.dp))

                    Column(modifier = Modifier.weight(1f)) {
                    Text(
                    text = transaction.merchant,
                    style = MaterialTheme.typography.titleMedium
                    )
                    Text(
                    text = transaction.category,
                    style = MaterialTheme.typography.bodySmall
                    )
                    }

                    // Amount
                    Text(
                    text = "${transaction.currency} ${transaction.amount}",
                    style = MaterialTheme.typography.titleLarge,
                    color = if (transaction.type == DEBIT) Color.Red else Color.Green
                    )
                    }
                    }
                    }</div>

                <h3>‚ö° Performance Optimizations</h3>
                <div class="algorithm-box">
                    <strong>1. Lazy Loading</strong>
                    <ul>
                        <li>LazyColumn for transaction lists</li>
                        <li>Pagination for large datasets</li>
                        <li>Database queries with LIMIT/OFFSET</li>
                    </ul>

                    <strong>2. Coroutines & Flow</strong>
                    <ul>
                        <li>Background SMS parsing with Dispatchers.IO</li>
                        <li>Reactive data streams with Flow</li>
                        <li>StateFlow for UI state management</li>
                    </ul>

                    <strong>3. Database Optimization</strong>
                    <ul>
                        <li>Indexes on frequently queried columns</li>
                        <li>Compiled queries for speed</li>
                        <li>Transaction batching</li>
                    </ul>

                    <strong>4. AI Model Optimization</strong>
                    <ul>
                        <li>Model quantization (INT8)</li>
                        <li>Lazy model loading</li>
                        <li>Response streaming</li>
                        <li>Token limit optimization</li>
                    </ul>
                </div>

                <h3>üîß Build Configuration</h3>
                <div class="code-block">// build.gradle.kts (app level)
                    plugins {
                    id("com.android.application")
                    id("org.jetbrains.kotlin.android")
                    id("com.google.dagger.hilt.android")
                    id("com.google.devtools.ksp")
                    }

                    android {
                    namespace = "com.pennywiseai.tracker"
                    compileSdk = 34

                    defaultConfig {
                    applicationId = "com.pennywiseai.tracker"
                    minSdk = 31 // Android 12
                    targetSdk = 34
                    versionCode = 238
                    versionName = "2.15.38"
                    }

                    buildFeatures {
                    compose = true
                    }

                    composeOptions {
                    kotlinCompilerExtensionVersion = "1.5.8"
                    }
                    }

                    dependencies {
                    // Jetpack Compose
                    implementation("androidx.compose.ui:ui:1.6.0")
                    implementation("androidx.compose.material3:material3:1.2.0")
                    implementation("androidx.activity:activity-compose:1.8.0")

                    // Room Database
                    implementation("androidx.room:room-runtime:2.6.0")
                    implementation("androidx.room:room-ktx:2.6.0")
                    ksp("androidx.room:room-compiler:2.6.0")

                    // Hilt DI
                    implementation("com.google.dagger:hilt-android:2.48")
                    ksp("com.google.dagger:hilt-compiler:2.48")

                    // Coroutines
                    implementation("org.jetbrains.kotlinx:kotlinx-coroutines-android:1.7.3")

                    // MediaPipe LLM
                    implementation("com.google.mediapipe:tasks-genai:0.10.8")

                    // Charts
                    implementation("com.github.PhilJay:MPAndroidChart:v3.1.0")
                    }</div>

                <h3>üì± App Size & Requirements</h3>
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-number">~50MB</div>
                        <div class="stat-label">App Size (without AI)</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">~1.5GB</div>
                        <div class="stat-label">AI Model Size</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">4GB+</div>
                        <div class="stat-label">Recommended RAM</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">Android 12+</div>
                        <div class="stat-label">Minimum Version</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- BANKS SECTION -->
        <div id="banks" class="content-section">
            <div class="card">
                <h2>üè¶ Supported Banks & Regex Patterns</h2>

                <h3>üáÆüá≥ Indian Banks (35 Banks)</h3>
                <div class="bank-grid">
                    <div class="bank-item">HDFC Bank</div>
                    <div class="bank-item">State Bank of India</div>
                    <div class="bank-item">ICICI Bank</div>
                    <div class="bank-item">Axis Bank</div>
                    <div class="bank-item">Kotak Mahindra</div>
                    <div class="bank-item">Punjab National</div>
                    <div class="bank-item">IDBI Bank</div>
                    <div class="bank-item">Indian Bank</div>
                    <div class="bank-item">Federal Bank</div>
                    <div class="bank-item">Karnataka Bank</div>
                    <div class="bank-item">Kerala Gramin</div>
                    <div class="bank-item">Canara Bank</div>
                    <div class="bank-item">Bank of Baroda</div>
                    <div class="bank-item">Bank of India</div>
                    <div class="bank-item">Jupiter (CSB)</div>
                    <div class="bank-item">Amazon Pay</div>
                    <div class="bank-item">IDFC First</div>
                    <div class="bank-item">Union Bank</div>
                    <div class="bank-item">HSBC Bank</div>
                    <div class="bank-item">Central Bank</div>
                    <div class="bank-item">South Indian Bank</div>
                    <div class="bank-item">JK Bank</div>
                    <div class="bank-item">Indian Overseas</div>
                    <div class="bank-item">Airtel Payments</div>
                    <div class="bank-item">AMEX</div>
                    <div class="bank-item">OneCard</div>
                    <div class="bank-item">UCO Bank</div>
                    <div class="bank-item">AU Bank</div>
                    <div class="bank-item">Yes Bank</div>
                    <div class="bank-item">IndusInd Bank</div>
                    <div class="bank-item">RBL Bank</div>
                    <div class="bank-item">Standard Chartered</div>
                    <div class="bank-item">Citibank India</div>
                    <div class="bank-item">Paytm Payments</div>
                    <div class="bank-item">PhonePe</div>
                </div>

                <h3>üåç International Banks</h3>
                <div class="feature-grid">
                    <div class="feature-card">
                        <h4>üá∫üá∏ USA (4 banks)</h4>
                        <ul style="margin-left: 15px;">
                            <li>Citi Bank - USD $</li>
                            <li>Discover Card - USD $</li>
                            <li>Old Hickory Credit Union - USD $</li>
                            <li>Charles Schwab - USD $</li>
                        </ul>
                    </div>

                    <div class="feature-card">
                        <h4>üá¶üá™ UAE (3 banks)</h4>
                        <ul style="margin-left: 15px;">
                            <li>First Abu Dhabi Bank (FAB) - AED ÿØ.ÿ•</li>
                            <li>Abu Dhabi Commercial Bank (ADCB) - AED ÿØ.ÿ•</li>
                            <li>Mashreq Bank - AED ÿØ.ÿ•</li>
                        </ul>
                    </div>

                    <div class="feature-card">
                        <h4>üá∏üá¶ Saudi Arabia</h4>
                        <ul style="margin-left: 15px;">
                            <li>Alinma Bank - SAR Ô∑º</li>
                            <li>Arabic SMS support</li>
                        </ul>
                    </div>

                    <div class="feature-card">
                        <h4>üá≥üáµ Nepal (3 banks)</h4>
                        <ul style="margin-left: 15px;">
                            <li>Laxmi Sunrise Bank - NPR ‚Ç®</li>
                            <li>Everest Bank - NPR ‚Ç®</li>
                            <li>NMB Bank - NPR ‚Ç®</li>
                        </ul>
                    </div>

                    <div class="feature-card">
                        <h4>üá™üáπ Ethiopia</h4>
                        <ul style="margin-left: 15px;">
                            <li>Commercial Bank of Ethiopia - ETB ·â•·à≠</li>
                        </ul>
                    </div>

                    <div class="feature-card">
                        <h4>üáßüáæ Belarus</h4>
                        <ul style="margin-left: 15px;">
                            <li>Priorbank - BYN Br</li>
                            <li>Russian/Belarusian support</li>
                        </ul>
                    </div>

                    <div class="feature-card">
                        <h4>üá®üá¥ Colombia</h4>
                        <ul style="margin-left: 15px;">
                            <li>Bancolombia - COP $</li>
                        </ul>
                    </div>

                    <div class="feature-card">
                        <h4>üá∞üá™ Kenya</h4>
                        <ul style="margin-left: 15px;">
                            <li>M-PESA - KES Ksh</li>
                            <li>Mobile money service</li>
                        </ul>
                    </div>
                </div>

                <h3>üîç Example Regex Patterns</h3>
                <div class="algorithm-box">
                    <strong>HDFC Bank Pattern:</strong>
                    <div class="code-block">class HDFCBankParser : BankParser {
                        override fun parse(sms: String): Transaction? {
                        // Sender: HDFCBK
                        // Example: "Rs.1,234.56 debited from a/c **1234 on 15-Nov-24 at Amazon"

                        val amountPattern = """Rs\.?([0-9,]+\.?\d*)"""
                        val merchantPattern = """at\s+([\w\s]+?)(?:\.|$)"""
                        val accountPattern = """\*\*(\d{4})"""
                        val balancePattern = """Avl bal:?\s*Rs\.?([0-9,]+\.?\d*)"""

                        val amount = amountPattern.find(sms)
                        ?.groupValues?.get(1)?.replace(",", "")?.toDoubleOrNull()

                        val merchant = merchantPattern.find(sms)
                        ?.groupValues?.get(1)?.trim()

                        val type = when {
                        sms.contains("debited", ignoreCase = true) -> DEBIT
                        sms.contains("credited", ignoreCase = true) -> CREDIT
                        else -> DEBIT
                        }

                        return Transaction(
                        amount = amount ?: return null,
                        merchant = merchant ?: "Unknown",
                        type = type,
                        bank = "HDFC",
                        currency = "INR"
                        )
                        }
                        }</div>

                    <strong>SBI Pattern:</strong>
                    <div class="code-block">// Example SMS: "Dear Customer, INR 500.00 debited from A/c XX1234
                        // on 15-11-24 to VPA xyz@paytm (UPI Ref No 123456789).
                        // Avl Bal: INR 45,678.90. State Bank of India"

                        val sbiPattern = """
                        (?:INR|Rs\.?)\s*([0-9,]+\.?\d*) # Amount
                        \s+debited\s+from\s+
                        A/c\s+[X*]*(\d{4}) # Account number
                        .*?to\s+([\w\s@.]+?) # Merchant/VPA
                        .*?Avl\s+Bal.*?([0-9,]+\.?\d*) # Balance
                        """.toRegex(RegexOption.IGNORE_CASE)</div>

                    <strong>ICICI Bank Pattern:</strong>
                    <div class="code-block">// Example SMS: "Transaction of INR 1234.00 on ICICI Bank
                        // CREDIT Card XX1234 at AMAZON on 15-11-24. Avl Lmt: INR 50000.00"

                        val iciciPattern = """
                        Transaction\s+of\s+INR\s+([0-9,]+\.?\d*) # Amount
                        \s+on\s+ICICI\s+Bank\s+
                        (CREDIT|DEBIT)\s+Card\s+ # Card type
                        [X*]*(\d{4}) # Card number
                        \s+at\s+([\w\s]+?) # Merchant
                        \s+on\s+(\d{2}-\d{2}-\d{2}) # Date
                        """.toRegex()</div>
                </div>

                <h3>üåê Multi-Language Support</h3>
                <div class="feature-grid">
                    <div class="feature-card">
                        <h4>Arabic (RTL)</h4>
                        <p>Supports Alinma Bank SMS in Arabic with right-to-left text handling.</p>
                    </div>
                    <div class="feature-card">
                        <h4>Russian/Belarusian</h4>
                        <p>Priorbank SMS parsing with Cyrillic characters.</p>
                    </div>
                    <div class="feature-card">
                        <h4>Hindi</h4>
                        <p>Some Indian banks send mixed Hindi-English SMS.</p>
                    </div>
                    <div class="feature-card">
                        <h4>Spanish</h4>
                        <p>Bancolombia transactions in Spanish.</p>
                    </div>
                </div>

                <h3>‚ûï Adding New Banks</h3>
                <div class="algorithm-box">
                    <strong>Steps to Add Bank Support:</strong>
                    <ol style="margin-left: 20px;">
                        <li>Collect 5-10 sample SMS from the bank</li>
                        <li>Identify common patterns (amount, merchant, date)</li>
                        <li>Create a new parser class extending BankParser</li>
                        <li>Write regex patterns for each field</li>
                        <li>Add unit tests with sample SMS</li>
                        <li>Register parser in BankParserFactory</li>
                        <li>Submit pull request with samples</li>
                    </ol>

                    <div class="code-block">// Template for new bank parser
                        class NewBankParser : BankParser {
                        override val senderIds = listOf("NEWBNK", "NEWBANK")

                        override fun parse(sms: String): Transaction? {
                        // Define your regex patterns
                        val amountPattern = """your-pattern-here"""
                        val merchantPattern = """your-pattern-here"""

                        // Extract and validate
                        val amount = extractAmount(sms, amountPattern) ?: return null
                        val merchant = extractMerchant(sms, merchantPattern) ?: "Unknown"

                        return Transaction(/* ... */)
                        }
                        }</div>
                </div>
            </div>
        </div>

    </div>

    <script>
        function showTab(tabName) {
            // Hide all sections
            const sections = document.querySelectorAll('.content-section');
            sections.forEach(section => section.classList.remove('active'));

            // Remove active class from all buttons
            const buttons = document.querySelectorAll('.tab-btn');
            buttons.forEach(btn => btn.classList.remove('active'));

            // Show selected section
            document.getElementById(tabName).classList.add('active');

            // Add active class to clicked button
            event.target.classList.add('active');

            // Smooth scroll to top
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // Add animation on scroll
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.style.opacity = '1';
                    entry.target.style.transform = 'translateY(0)';
                }
            });
        }, { threshold: 0.1 });

        document.querySelectorAll('.card').forEach(card => {
            card.style.opacity = '0';
            card.style.transform = 'translateY(20px)';
            card.style.transition = 'all 0.5s ease';
            observer.observe(card);
        });

        // Add syntax highlighting effect
        document.querySelectorAll('.code-block').forEach(block => {
            block.addEventListener('click', function () {
                const selection = window.getSelection();
                const range = document.createRange();
                range.selectNodeContents(this);
                selection.removeAllRanges();
                selection.addRange(range);
            });
        });
    </script>
</body>

</html>